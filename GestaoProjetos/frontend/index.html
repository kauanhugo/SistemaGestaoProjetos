<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plataforma de Gestão de Projetos</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2980b9;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --gray-color: #95a5a6;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        /* Login Styles */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        }
        
        .login-form {
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            width: 100%;
            max-width: 400px;
        }
        
        .login-form h2 {
            text-align: center;
            margin-bottom: 30px;
            color: var(--dark-color);
        }
        
        .login-form .form-group {
            margin-bottom: 20px;
        }
        
        .login-form .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .login-btn {
            width: 100%;
            padding: 12px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .login-btn:hover {
            background-color: var(--secondary-color);
        }
        
        .container {
            display: flex;
            min-height: 100vh;
        }
        
        /* Sidebar */
        .sidebar {
            width: 250px;
            background-color: var(--dark-color);
            color: white;
            padding: 20px 0;
            transition: all 0.3s;
        }
        
        .logo {
            padding: 0 20px 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 20px;
        }
        
        .logo h1 {
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .user-info {
            padding: 0 20px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .nav-links {
            list-style: none;
        }
        
        .nav-links li {
            padding: 12px 20px;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .nav-links li:hover {
            background-color: rgba(255,255,255,0.1);
        }
        
        .nav-links li.active {
            background-color: var(--primary-color);
        }
        
        .nav-links a {
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
        }
        
        .nav-links i {
            margin-right: 10px;
            font-size: 1.2rem;
            width: 20px;
            text-align: center;
        }
        
        /* Main Content */
        .main-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .header h2 {
            font-size: 1.8rem;
            color: var(--dark-color);
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: var(--secondary-color);
        }
        
        .btn-secondary {
            background-color: var(--gray-color);
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: #7f8c8d;
        }
        
        .btn-danger {
            background-color: var(--danger-color);
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #c0392b;
        }
        
        /* Dashboard Styles */
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            margin: 10px 0;
        }
        
        .stat-label {
            color: var(--gray-color);
            font-size: 0.9rem;
        }
        
        .recent-activities {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
        }
        
        .activity-list {
            list-style: none;
            margin-top: 15px;
        }
        
        .activity-item {
            padding: 10px 0;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
        }
        
        .activity-item:last-child {
            border-bottom: none;
        }
        
        .activity-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: var(--light-color);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
        }
        
        /* Projects Grid */
        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .project-card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .project-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .project-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }
        
        .project-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--dark-color);
        }
        
        .priority {
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .priority-low {
            background-color: #e8f5e9;
            color: var(--success-color);
        }
        
        .priority-medium {
            background-color: #fff3e0;
            color: var(--warning-color);
        }
        
        .priority-high {
            background-color: #ffebee;
            color: var(--danger-color);
        }
        
        .project-dates {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 0.9rem;
            color: var(--gray-color);
        }
        
        .project-description {
            margin-bottom: 15px;
            color: #555;
            font-size: 0.95rem;
        }
        
        .project-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 1px solid #eee;
            padding-top: 15px;
        }
        
        .project-category {
            background-color: var(--light-color);
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
        }
        
        .project-budget {
            font-weight: 600;
            color: var(--dark-color);
        }
        
        /* Form Styles */
        .form-container {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 30px;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .form-title {
            font-size: 1.5rem;
            margin-bottom: 25px;
            color: var(--dark-color);
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #444;
        }
        
        .form-control {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
            transition: border 0.3s;
        }
        
        .form-control:focus {
            border-color: var(--primary-color);
            outline: none;
        }
        
        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }
        
        .priority-options {
            display: flex;
            gap: 15px;
        }
        
        .priority-option {
            flex: 1;
            text-align: center;
            padding: 15px;
            border: 2px solid #eee;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .priority-option:hover {
            border-color: var(--primary-color);
        }
        
        .priority-option.selected {
            border-color: var(--primary-color);
            background-color: rgba(52, 152, 219, 0.1);
        }
        
        .priority-name {
            font-weight: 500;
            margin-bottom: 5px;
        }
        
        .priority-description {
            font-size: 0.85rem;
            color: var(--gray-color);
        }
        
        .dates-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .form-footer {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        /* Project Details */
        .project-details {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 30px;
        }
        
        .details-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 25px;
            border-bottom: 1px solid #eee;
            padding-bottom: 20px;
        }
        
        .details-title {
            font-size: 1.8rem;
            color: var(--dark-color);
        }
        
        .details-priority {
            padding: 6px 15px;
            border-radius: 20px;
            font-weight: 500;
        }
        
        .details-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        .details-section {
            margin-bottom: 25px;
        }
        
        .details-section-title {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: var(--dark-color);
            font-weight: 600;
        }
        
        .details-info {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .info-label {
            font-weight: 500;
            color: #555;
        }
        
        .info-value {
            color: #333;
        }
        
        .team-members {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .team-member {
            display: flex;
            align-items: center;
            background-color: var(--light-color);
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        .member-avatar {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 8px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        /* Team Page Styles */
        .team-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .team-member-card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            text-align: center;
            position: relative;
        }
        
        .member-avatar-large {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-size: 1.8rem;
            font-weight: 600;
        }
        
        .member-name {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .member-role {
            color: var(--gray-color);
            margin-bottom: 15px;
        }
        
        .member-skills {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            justify-content: center;
            margin-top: 15px;
        }
        
        .skill-tag {
            background-color: var(--light-color);
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
        }
        
        .member-actions {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            gap: 5px;
        }
        
        .action-btn {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--gray-color);
            font-size: 0.9rem;
        }
        
        .action-btn:hover {
            color: var(--primary-color);
        }
        
        /* Calendar Styles */
        .calendar-container {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background-color: #eee;
        }
        
        .calendar-day {
            background-color: white;
            padding: 10px;
            min-height: 100px;
            position: relative;
        }
        
        .calendar-day-header {
            background-color: var(--light-color);
            padding: 10px;
            text-align: center;
            font-weight: 600;
        }
        
        .day-number {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .calendar-event {
            background-color: var(--primary-color);
            color: white;
            padding: 2px 5px;
            border-radius: 3px;
            font-size: 0.8rem;
            margin-bottom: 2px;
            cursor: pointer;
        }
        
        .other-month {
            background-color: #f9f9f9;
            color: #ccc;
        }
        
        .today {
            background-color: rgba(52, 152, 219, 0.1);
        }
        
        /* Reports Styles */
        .reports-container {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
        }
        
        .chart-container {
            height: 300px;
            margin: 20px 0;
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 15px;
        }
        
        .report-filters {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        /* Settings Styles */
        .settings-container {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
        }
        
        .settings-tabs {
            display: flex;
            border-bottom: 1px solid #eee;
            margin-bottom: 20px;
        }
        
        .settings-tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
        }
        
        .settings-tab.active {
            border-bottom: 2px solid var(--primary-color);
            color: var(--primary-color);
            font-weight: 500;
        }
        
        .settings-content {
            padding: 20px 0;
        }
        
        .hidden {
            display: none;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
            overflow-y: auto;
        }
        
        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 8px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            position: relative;
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray-color);
        }
        
        .close-modal:hover {
            color: var(--dark-color);
        }
        
        /* Breadcrumb */
        .breadcrumb {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            font-size: 0.9rem;
        }
        
        .breadcrumb-item {
            color: var(--primary-color);
            cursor: pointer;
        }
        
        .breadcrumb-item:hover {
            text-decoration: underline;
        }
        
        .breadcrumb-separator {
            margin: 0 10px;
            color: var(--gray-color);
        }
        
        /* Task Management */
        .tasks-container {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            margin-top: 20px;
        }
        
        .task-list {
            list-style: none;
            margin-top: 15px;
        }
        
        .task-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .task-item:last-child {
            border-bottom: none;
        }
        
        .task-info {
            flex: 1;
        }
        
        .task-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .task-description {
            color: var(--gray-color);
            font-size: 0.9rem;
        }
        
        .task-actions {
            display: flex;
            gap: 10px;
        }
        
        /* Notification Styles */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 5px;
            color: white;
            z-index: 1100;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            animation: slideIn 0.3s ease-out;
        }
        
        .notification.success {
            background-color: var(--success-color);
        }
        
        .notification.error {
            background-color: var(--danger-color);
        }
        
        .notification.info {
            background-color: var(--primary-color);
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-container">
        <div class="login-form">
            <h2>GestãoPro - Login</h2>
            <div class="form-group">
                <input type="text" class="form-control" id="username" placeholder="Usuário" value="admin">
            </div>
            <div class="form-group">
                <input type="password" class="form-control" id="password" placeholder="Senha" value="123456">
            </div>
            <button class="login-btn" id="loginBtn">Entrar</button>
            <div style="margin-top: 15px; text-align: center; font-size: 0.9rem; color: #666;">
                <p>Use: admin / 123456</p>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="app" class="container hidden">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo">
                <h1>GestãoPro</h1>
            </div>
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">KH</div>
                <div>
                    <div id="userName">Kauan Hugo</div>
                    <div style="font-size: 0.8rem; color: #ccc;">Gerente</div>
                </div>
            </div>
            <ul class="nav-links">
                <li class="active" data-page="dashboard"><a href="#"><i class="fas fa-chart-bar"></i> Dashboard</a></li>
                <li data-page="projects"><a href="#"><i class="fas fa-tasks"></i> Projetos</a></li>
                <li data-page="team"><a href="#"><i class="fas fa-users"></i> Equipe</a></li>
                <li data-page="calendar"><a href="#"><i class="fas fa-calendar-alt"></i> Calendário</a></li>
                <li data-page="reports"><a href="#"><i class="fas fa-chart-line"></i> Relatórios</a></li>
                <li data-page="settings"><a href="#"><i class="fas fa-cog"></i> Configurações</a></li>
                <li id="logoutBtn"><a href="#"><i class="fas fa-sign-out-alt"></i> Sair</a></li>
            </ul>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <!-- Dashboard -->
            <div id="dashboard" class="page-content">
                <div class="header">
                    <h2>Dashboard</h2>
                    <div id="currentDate">Bem-vindo de volta, Kauan!</div>
                </div>
                
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-label">Projetos Ativos</div>
                        <div class="stat-value" id="activeProjectsCount">0</div>
                        <div class="stat-label" id="projectsChange">+0 desde a última semana</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Tarefas Pendentes</div>
                        <div class="stat-value" id="pendingTasksCount">0</div>
                        <div class="stat-label" id="urgentTasksCount">0 urgentes</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Orçamento Utilizado</div>
                        <div class="stat-value" id="budgetUsed">0%</div>
                        <div class="stat-label" id="budgetAmount">R$ 0,00</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Equipe</div>
                        <div class="stat-value" id="teamMembersCount">0</div>
                        <div class="stat-label" id="availableMembers">0 disponíveis</div>
                    </div>
                </div>
                
                <div class="recent-activities">
                    <h3>Atividades Recentes</h3>
                    <ul class="activity-list" id="activityList">
                        <!-- Activities will be populated by JavaScript -->
                    </ul>
                </div>
            </div>
            
            <!-- Projects -->
            <div id="projects" class="page-content hidden">
                <div class="header">
                    <h2>Projetos</h2>
                    <button class="btn btn-primary" id="newProjectBtn">+ Novo Projeto</button>
                </div>
                
                <!-- Breadcrumb -->
                <div class="breadcrumb hidden" id="projectsBreadcrumb">
                    <span class="breadcrumb-item" id="backToProjects">Projetos</span>
                    <span class="breadcrumb-separator">/</span>
                    <span id="currentProjectName">Detalhes</span>
                </div>
                
                <!-- Projects Grid -->
                <div class="projects-grid" id="projectsGrid">
                    <!-- Project cards will be dynamically added here -->
                </div>
                
                <!-- Create/Edit Project Form -->
                <div class="form-container hidden" id="projectForm">
                    <h3 class="form-title" id="formTitle">Criar Novo Projeto</h3>
                    <form id="projectFormElement">
                        <div class="form-group">
                            <label class="form-label" for="projectName">Nome do Projeto *</label>
                            <input type="text" class="form-control" id="projectName" placeholder="Ex: Sistema de Gestão Empresarial" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="projectDescription">Descrição Detalhada</label>
                            <textarea class="form-control" id="projectDescription" placeholder="Descreva os objetivos, escopo e prioridade do projeto"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Prioridade</label>
                            <div class="priority-options">
                                <div class="priority-option" data-value="low">
                                    <div class="priority-name">Baixa</div>
                                    <div class="priority-description">Sem urgência</div>
                                </div>
                                <div class="priority-option selected" data-value="medium">
                                    <div class="priority-name">Média</div>
                                    <div class="priority-description">Prioridade normal</div>
                                </div>
                                <div class="priority-option" data-value="high">
                                    <div class="priority-name">Alta</div>
                                    <div class="priority-description">Urgente</div>
                                </div>
                            </div>
                            <input type="hidden" id="projectPriority" value="medium">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Datas do Projeto</label>
                            <div class="dates-container">
                                <div>
                                    <label class="form-label" for="startDate">Data Início</label>
                                    <input type="date" class="form-control" id="startDate">
                                </div>
                                <div>
                                    <label class="form-label" for="endDate">Prazo Final</label>
                                    <input type="date" class="form-control" id="endDate">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="projectBudget">Orçamento (R$)</label>
                            <input type="number" class="form-control" id="projectBudget" min="0" step="0.01" value="0.00">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="projectCategory">Categoria</label>
                            <select class="form-control" id="projectCategory">
                                <option value="">Selecione uma categoria</option>
                                <option value="tecnologia">Tecnologia</option>
                                <option value="marketing">Marketing</option>
                                <option value="rh">Recursos Humanos</option>
                                <option value="financeiro">Financeiro</option>
                                <option value="operacoes">Operações</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="projectTeam">Selecionar Equipe</label>
                            <select class="form-control" id="projectTeam" multiple>
                                <!-- Team options will be populated by JavaScript -->
                            </select>
                        </div>
                        
                        <div class="form-footer">
                            <button type="button" class="btn btn-secondary" id="cancelBtn">Cancelar</button>
                            <button type="submit" class="btn btn-primary" id="saveProjectBtn">Criar Projeto</button>
                        </div>
                    </form>
                </div>
                
                <!-- Project Details -->
                <div class="project-details hidden" id="projectDetails">
                    <div class="details-header">
                        <h3 class="details-title" id="detailsTitle">Nome do Projeto</h3>
                        <div class="details-priority" id="detailsPriority">Média</div>
                    </div>
                    
                    <div class="details-grid">
                        <div>
                            <div class="details-section">
                                <h4 class="details-section-title">Descrição</h4>
                                <p id="detailsDescription">Descrição do projeto aparecerá aqui.</p>
                            </div>
                            
                            <div class="details-section">
                                <h4 class="details-section-title">Informações do Projeto</h4>
                                <div class="details-info">
                                    <div class="info-item">
                                        <span class="info-label">Data de Início:</span>
                                        <span class="info-value" id="detailsStartDate">--/--/----</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Prazo Final:</span>
                                        <span class="info-value" id="detailsEndDate">--/--/----</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Orçamento:</span>
                                        <span class="info-value" id="detailsBudget">R$ 0,00</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Categoria:</span>
                                        <span class="info-value" id="detailsCategory">-</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <div class="details-section">
                                <h4 class="details-section-title">Equipe</h4>
                                <div class="team-members" id="detailsTeam">
                                    <!-- Team members will be added here -->
                                </div>
                            </div>
                            
                            <div class="details-section">
                                <h4 class="details-section-title">Ações</h4>
                                <div style="display: flex; gap: 10px;">
                                    <button class="btn btn-primary" id="editProjectBtn">Editar Projeto</button>
                                    <button class="btn btn-danger" id="deleteProjectBtn">Excluir Projeto</button>
                                    <button class="btn btn-secondary" id="backToListBtn">Voltar à Lista</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Task Management Section -->
                    <div class="tasks-container">
                        <div class="details-section">
                            <h4 class="details-section-title">Tarefas do Projeto</h4>
                            <button class="btn btn-primary" id="addTaskBtn">+ Adicionar Tarefa</button>
                        </div>
                        
                        <ul class="task-list" id="projectTasks">
                            <!-- Tasks will be dynamically added here -->
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Team -->
            <div id="team" class="page-content hidden">
                <div class="header">
                    <h2>Equipe</h2>
                    <button class="btn btn-primary" id="addMemberBtn">+ Adicionar Membro</button>
                </div>
                
                <div class="team-grid" id="teamGrid">
                    <!-- Team members will be dynamically added here -->
                </div>
                
                <!-- Add/Edit Member Form -->
                <div class="form-container hidden" id="memberForm">
                    <h3 class="form-title" id="memberFormTitle">Adicionar Membro</h3>
                    <form id="memberFormElement">
                        <div class="form-group">
                            <label class="form-label" for="memberName">Nome Completo *</label>
                            <input type="text" class="form-control" id="memberName" placeholder="Ex: Maria Silva" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="memberEmail">Email *</label>
                            <input type="email" class="form-control" id="memberEmail" placeholder="exemplo@empresa.com" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="memberRole">Cargo *</label>
                            <input type="text" class="form-control" id="memberRole" placeholder="Ex: Desenvolvedor Front-end" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="memberSkills">Habilidades (separadas por vírgula)</label>
                            <input type="text" class="form-control" id="memberSkills" placeholder="Ex: JavaScript, React, CSS">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="memberStatus">Status</label>
                            <select class="form-control" id="memberStatus">
                                <option value="active">Ativo</option>
                                <option value="inactive">Inativo</option>
                                <option value="vacation">Férias</option>
                            </select>
                        </div>
                        
                        <div class="form-footer">
                            <button type="button" class="btn btn-secondary" id="cancelMemberBtn">Cancelar</button>
                            <button type="submit" class="btn btn-primary" id="saveMemberBtn">Adicionar Membro</button>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- Calendar -->
            <div id="calendar" class="page-content hidden">
                <div class="header">
                    <h2>Calendário</h2>
                    <button class="btn btn-primary" id="addEventBtn">+ Novo Evento</button>
                </div>
                
                <div class="calendar-container">
                    <div class="calendar-header">
                        <h3 id="calendarMonth">Outubro 2023</h3>
                        <div>
                            <button class="btn btn-secondary" id="prevMonthBtn">‹</button>
                            <button class="btn btn-secondary" id="todayBtn">Hoje</button>
                            <button class="btn btn-secondary" id="nextMonthBtn">›</button>
                        </div>
                    </div>
                    
                    <div class="calendar-grid" id="calendarGrid">
                        <!-- Calendar will be generated dynamically -->
                    </div>
                </div>
                
                <!-- Add Event Form -->
                <div class="form-container hidden" id="eventForm">
                    <h3 class="form-title" id="eventFormTitle">Adicionar Evento</h3>
                    <form id="eventFormElement">
                        <div class="form-group">
                            <label class="form-label" for="eventTitle">Título do Evento *</label>
                            <input type="text" class="form-control" id="eventTitle" placeholder="Ex: Reunião de Planejamento" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="eventDescription">Descrição</label>
                            <textarea class="form-control" id="eventDescription" placeholder="Descrição do evento"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Datas do Evento</label>
                            <div class="dates-container">
                                <div>
                                    <label class="form-label" for="eventStartDate">Data Início</label>
                                    <input type="date" class="form-control" id="eventStartDate">
                                </div>
                                <div>
                                    <label class="form-label" for="eventEndDate">Data Término</label>
                                    <input type="date" class="form-control" id="eventEndDate">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="eventColor">Cor do Evento</label>
                            <select class="form-control" id="eventColor">
                                <option value="#3498db">Azul</option>
                                <option value="#27ae60">Verde</option>
                                <option value="#e74c3c">Vermelho</option>
                                <option value="#f39c12">Laranja</option>
                                <option value="#9b59b6">Roxo</option>
                            </select>
                        </div>
                        
                        <div class="form-footer">
                            <button type="button" class="btn btn-secondary" id="cancelEventBtn">Cancelar</button>
                            <button type="submit" class="btn btn-primary" id="saveEventBtn">Salvar Evento</button>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- Reports -->
            <div id="reports" class="page-content hidden">
                <div class="header">
                    <h2>Relatórios</h2>
                    <button class="btn btn-primary" id="exportReportBtn">Exportar Relatório</button>
                </div>
                
                <div class="reports-container">
                    <div class="report-filters">
                        <select class="form-control" id="reportPeriod" style="width: auto;">
                            <option value="30">Últimos 30 dias</option>
                            <option value="90">Últimos 90 dias</option>
                            <option value="365">Este ano</option>
                        </select>
                        <select class="form-control" id="reportProject" style="width: auto;">
                            <option value="all">Todos os projetos</option>
                            <option value="active">Projetos ativos</option>
                            <option value="completed">Projetos concluídos</option>
                        </select>
                        <button class="btn btn-primary" id="applyFiltersBtn">Aplicar Filtros</button>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">Projetos Concluídos</div>
                            <div class="stat-value" id="completedProjects">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Taxa de Sucesso</div>
                            <div class="stat-value" id="successRate">0%</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Orçamento Médio</div>
                            <div class="stat-value" id="averageBudget">R$ 0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Membros Ativos</div>
                            <div class="stat-value" id="activeMembers">0</div>
                        </div>
                    </div>
                    
                    <h3>Progresso dos Projetos</h3>
                    <div class="chart-container">
                        <canvas id="projectsProgressChart"></canvas>
                    </div>
                    
                    <h3>Alocação de Recursos</h3>
                    <div class="chart-container">
                        <canvas id="resourceAllocationChart"></canvas>
                    </div>
                    
                    <h3>Desempenho por Categoria</h3>
                    <div class="chart-container">
                        <canvas id="categoryPerformanceChart"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- Settings -->
            <div id="settings" class="page-content hidden">
                <div class="header">
                    <h2>Configurações</h2>
                </div>
                
                <div class="settings-container">
                    <div class="settings-tabs">
                        <div class="settings-tab active" data-tab="profile">Perfil</div>
                        <div class="settings-tab" data-tab="notifications">Notificações</div>
                        <div class="settings-tab" data-tab="preferences">Preferências</div>
                    </div>
                    
                    <div class="settings-content">
                        <div id="profile-tab" class="settings-tab-content">
                            <h3>Informações do Perfil</h3>
                            <div class="form-group">
                                <label class="form-label">Nome</label>
                                <input type="text" class="form-control" value="Kauan Hugo">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Email</label>
                                <input type="email" class="form-control" value="kauan.hugo@empresa.com">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Cargo</label>
                                <input type="text" class="form-control" value="Gerente de Projetos">
                            </div>
                            <button class="btn btn-primary">Salvar Alterações</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Task Modal -->
    <div id="taskModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3 id="taskModalTitle">Adicionar Tarefa</h3>
            <form id="taskForm">
                <div class="form-group">
                    <label class="form-label" for="taskTitle">Título da Tarefa *</label>
                    <input type="text" class="form-control" id="taskTitle" placeholder="Ex: Desenvolver interface do usuário" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="taskDescription">Descrição</label>
                    <textarea class="form-control" id="taskDescription" placeholder="Descreva os detalhes da tarefa"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="taskAssignee">Responsável</label>
                    <select class="form-control" id="taskAssignee">
                        <!-- Team members will be populated by JavaScript -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="taskDeadline">Prazo</label>
                    <input type="date" class="form-control" id="taskDeadline">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="taskPriority">Prioridade</label>
                    <select class="form-control" id="taskPriority">
                        <option value="low">Baixa</option>
                        <option value="medium" selected>Média</option>
                        <option value="high">Alta</option>
                    </select>
                </div>
                
                <div class="form-footer">
                    <button type="button" class="btn btn-secondary" id="cancelTaskBtn">Cancelar</button>
                    <button type="submit" class="btn btn-primary" id="saveTaskBtn">Salvar Tarefa</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // ========== DATA MODELS ==========
        
        // Sample projects data
        let projects = [
            {
                id: 1,
                name: "Sistema de Gestão Empresarial",
                description: "Desenvolvimento de um sistema completo para gestão de processos empresariais, incluindo módulos de RH, financeiro e operações.",
                priority: "high",
                startDate: "2023-10-01",
                endDate: "2024-03-31",
                budget: 150000.00,
                category: "tecnologia",
                team: ["maria", "joao", "ana"],
                status: "active",
                progress: 65,
                tasks: [
                    {
                        id: 1,
                        title: "Design do sistema",
                        description: "Criar design das telas principais",
                        assignee: "maria",
                        deadline: "2023-11-15",
                        priority: "high",
                        status: "completed"
                    },
                    {
                        id: 2,
                        title: "Desenvolvimento backend",
                        description: "Implementar API e lógica de negócio",
                        assignee: "joao",
                        deadline: "2024-01-31",
                        priority: "high",
                        status: "in-progress"
                    }
                ]
            },
            {
                id: 2,
                name: "Campanha de Marketing Digital",
                description: "Planejamento e execução de campanha digital para lançamento do novo produto da empresa.",
                priority: "medium",
                startDate: "2023-11-15",
                endDate: "2024-02-28",
                budget: 50000.00,
                category: "marketing",
                team: ["carla", "pedro"],
                status: "active",
                progress: 30,
                tasks: [
                    {
                        id: 1,
                        title: "Criação de conteúdo",
                        description: "Desenvolver materiais para redes sociais",
                        assignee: "carla",
                        deadline: "2023-12-01",
                        priority: "medium",
                        status: "pending"
                    }
                ]
            },
            {
                id: 3,
                name: "Programa de Treinamento Corporativo",
                description: "Desenvolvimento e implementação de programa de treinamento para equipes de vendas e atendimento.",
                priority: "low",
                startDate: "2023-12-01",
                endDate: "2024-01-31",
                budget: 25000.00,
                category: "rh",
                team: ["ana", "maria"],
                status: "active",
                progress: 10,
                tasks: []
            },
            {
                id: 4,
                name: "Site Corporativo",
                description: "Redesign completo do site corporativo com foco em experiência do usuário e performance.",
                priority: "high",
                startDate: "2023-09-01",
                endDate: "2023-11-30",
                budget: 80000.00,
                category: "tecnologia",
                team: ["joao", "carla"],
                status: "completed",
                progress: 100,
                tasks: []
            }
        ];

        // Team members data
        let teamMembers = [
            {
                id: "maria",
                name: "Maria Silva",
                email: "maria.silva@empresa.com",
                role: "Gerente de Projetos",
                skills: ["Gestão", "Scrum", "Planejamento", "Liderança"],
                status: "active",
                avatar: "MS"
            },
            {
                id: "joao",
                name: "João Santos",
                email: "joao.santos@empresa.com",
                role: "Desenvolvedor Sênior",
                skills: ["JavaScript", "React", "Node.js", "TypeScript"],
                status: "active",
                avatar: "JS"
            },
            {
                id: "ana",
                name: "Ana Oliveira",
                email: "ana.oliveira@empresa.com",
                role: "Designer UX/UI",
                skills: ["Figma", "UI Design", "Prototipagem", "Research"],
                status: "active",
                avatar: "AO"
            },
            {
                id: "pedro",
                name: "Pedro Costa",
                email: "pedro.costa@empresa.com",
                role: "Desenvolvedor Full Stack",
                skills: ["Python", "Django", "Vue.js", "PostgreSQL"],
                status: "active",
                avatar: "PC"
            },
            {
                id: "carla",
                name: "Carla Rodrigues",
                email: "carla.rodrigues@empresa.com",
                role: "Especialista em Marketing",
                skills: ["SEO", "Google Ads", "Analytics", "Redes Sociais"],
                status: "active",
                avatar: "CR"
            }
        ];

        // Calendar events data
        let calendarEvents = [
            {
                id: 1,
                title: "Reunião de Planejamento",
                description: "Reunião inicial para definir escopo do projeto",
                startDate: new Date().toISOString().split('T')[0],
                endDate: new Date().toISOString().split('T')[0],
                color: "#3498db"
            },
            {
                id: 2,
                title: "Entrega Fase 1",
                description: "Entrega da primeira fase do projeto",
                startDate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                endDate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                color: "#27ae60"
            },
            {
                id: 3,
                title: "Revisão de Código",
                description: "Revisão do código com a equipe de desenvolvimento",
                startDate: new Date(Date.now() + 3 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                endDate: new Date(Date.now() + 3 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                color: "#f39c12"
            }
        ];

        // Activities data
        let activities = [
            {
                id: 1,
                type: "project",
                message: "Novo projeto 'Sistema de Gestão' criado",
                timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000),
                user: "Kauan Hugo"
            },
            {
                id: 2,
                type: "task",
                message: "Tarefa 'Design de Interface' concluída",
                timestamp: new Date(Date.now() - 5 * 60 * 60 * 1000),
                user: "Ana Oliveira"
            },
            {
                id: 3,
                type: "team",
                message: "Maria Silva adicionada ao projeto 'Campanha Marketing'",
                timestamp: new Date(Date.now() - 24 * 60 * 60 * 1000),
                user: "Kauan Hugo"
            },
            {
                id: 4,
                type: "comment",
                message: "Novo comentário no projeto 'Site Corporativo'",
                timestamp: new Date(Date.now() - 24 * 60 * 60 * 1000),
                user: "Pedro Costa"
            }
        ];

        // ========== GLOBAL VARIABLES ==========
        
        let currentUser = {
            name: "Kauan Hugo",
            role: "Gerente",
            avatar: "KH"
        };
        
        let currentDate = new Date();
        let currentView = 'dashboard';
        let charts = {};
        let currentProjectId = null;

        // ========== DOM ELEMENTS ==========
        
        const loginScreen = document.getElementById('loginScreen');
        const app = document.getElementById('app');
        const loginBtn = document.getElementById('loginBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const navLinks = document.querySelectorAll('.nav-links li');
        const pageContents = document.querySelectorAll('.page-content');
        
        // Dashboard elements
        const activeProjectsCount = document.getElementById('activeProjectsCount');
        const pendingTasksCount = document.getElementById('pendingTasksCount');
        const budgetUsed = document.getElementById('budgetUsed');
        const teamMembersCount = document.getElementById('teamMembersCount');
        const activityList = document.getElementById('activityList');
        
        // Projects elements
        const projectsGrid = document.getElementById('projectsGrid');
        const projectForm = document.getElementById('projectForm');
        const projectDetails = document.getElementById('projectDetails');
        const newProjectBtn = document.getElementById('newProjectBtn');
        const cancelBtn = document.getElementById('cancelBtn');
        const backToListBtn = document.getElementById('backToListBtn');
        const editProjectBtn = document.getElementById('editProjectBtn');
        const deleteProjectBtn = document.getElementById('deleteProjectBtn');
        const projectFormElement = document.getElementById('projectFormElement');
        const priorityOptions = document.querySelectorAll('.priority-option');
        const projectPriority = document.getElementById('projectPriority');
        const projectTeamSelect = document.getElementById('projectTeam');
        const projectsBreadcrumb = document.getElementById('projectsBreadcrumb');
        const backToProjects = document.getElementById('backToProjects');
        const currentProjectName = document.getElementById('currentProjectName');
        const addTaskBtn = document.getElementById('addTaskBtn');
        const projectTasks = document.getElementById('projectTasks');
        
        // Team elements
        const teamGrid = document.getElementById('teamGrid');
        const addMemberBtn = document.getElementById('addMemberBtn');
        const memberForm = document.getElementById('memberForm');
        const memberFormElement = document.getElementById('memberFormElement');
        const cancelMemberBtn = document.getElementById('cancelMemberBtn');
        
        // Calendar elements
        const calendarGrid = document.getElementById('calendarGrid');
        const calendarMonth = document.getElementById('calendarMonth');
        const prevMonthBtn = document.getElementById('prevMonthBtn');
        const nextMonthBtn = document.getElementById('nextMonthBtn');
        const todayBtn = document.getElementById('todayBtn');
        const addEventBtn = document.getElementById('addEventBtn');
        const eventForm = document.getElementById('eventForm');
        const eventFormElement = document.getElementById('eventFormElement');
        const cancelEventBtn = document.getElementById('cancelEventBtn');
        
        // Reports elements
        const applyFiltersBtn = document.getElementById('applyFiltersBtn');
        const exportReportBtn = document.getElementById('exportReportBtn');
        
        // Task Modal elements
        const taskModal = document.getElementById('taskModal');
        const taskForm = document.getElementById('taskForm');
        const taskModalTitle = document.getElementById('taskModalTitle');
        const taskAssignee = document.getElementById('taskAssignee');
        const cancelTaskBtn = document.getElementById('cancelTaskBtn');
        const saveTaskBtn = document.getElementById('saveTaskBtn');

        // ========== INITIALIZATION ==========
        
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            setupEventListeners();
            populateTeamSelect();
            renderDashboard();
        }

        // ========== AUTHENTICATION ==========
        
        function setupLogin() {
            loginBtn.addEventListener('click', function() {
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                
                console.log('Tentando login com:', username, password); // Debug
                
                if (username === 'admin' && password === '123456') {
                    console.log('Login bem-sucedido'); // Debug
                    loginScreen.classList.add('hidden');
                    app.classList.remove('hidden');
                    updateUserInfo();
                    renderDashboard();
                } else {
                    console.log('Login falhou'); // Debug
                    showNotification('Usuário ou senha incorretos! Use: admin / 123456', 'error');
                }
            });

            logoutBtn.addEventListener('click', function() {
                app.classList.add('hidden');
                loginScreen.classList.remove('hidden');
                // Reset form
                document.getElementById('username').value = 'admin';
                document.getElementById('password').value = '123456';
            });
        }

        function updateUserInfo() {
            document.getElementById('userName').textContent = currentUser.name;
            document.getElementById('userAvatar').textContent = currentUser.avatar;
        }

        // ========== NAVIGATION ==========
        
        function setupNavigation() {
            navLinks.forEach(link => {
                if (link.id !== 'logoutBtn') {
                    link.addEventListener('click', function() {
                        const page = this.getAttribute('data-page');
                        showPage(page);
                        
                        // Update active nav link
                        navLinks.forEach(l => l.classList.remove('active'));
                        this.classList.add('active');
                    });
                }
            });
        }

        function showPage(pageId) {
            pageContents.forEach(page => {
                page.classList.add('hidden');
            });
            
            document.getElementById(pageId).classList.remove('hidden');
            currentView = pageId;
            
            // Initialize page-specific content
            switch(pageId) {
                case 'dashboard':
                    renderDashboard();
                    break;
                case 'projects':
                    renderProjects();
                    break;
                case 'team':
                    renderTeam();
                    break;
                case 'calendar':
                    renderCalendar();
                    break;
                case 'reports':
                    renderReports();
                    break;
                case 'settings':
                    // Settings doesn't need special initialization
                    break;
            }
        }

        // ========== DASHBOARD ==========
        
        function renderDashboard() {
            updateDashboardStats();
            renderActivities();
            updateCurrentDate();
        }

        function updateDashboardStats() {
            const activeProjects = projects.filter(p => p.status === 'active').length;
            const completedProjects = projects.filter(p => p.status === 'completed').length;
            const totalBudget = projects.reduce((sum, project) => sum + project.budget, 0);
            const usedBudget = projects.reduce((sum, project) => sum + (project.budget * (project.progress / 100)), 0);
            const budgetPercentage = totalBudget > 0 ? Math.round((usedBudget / totalBudget) * 100) : 0;
            const activeMembers = teamMembers.filter(m => m.status === 'active').length;
            
            activeProjectsCount.textContent = activeProjects;
            pendingTasksCount.textContent = projects.reduce((sum, project) => sum + (100 - project.progress), 0);
            budgetUsed.textContent = `${budgetPercentage}%`;
            budgetAmount.textContent = formatCurrency(usedBudget);
            teamMembersCount.textContent = activeMembers;
            
            // Update additional info
            document.getElementById('projectsChange').textContent = `+${completedProjects} desde o início`;
            document.getElementById('urgentTasksCount').textContent = `${projects.filter(p => p.priority === 'high').length} urgentes`;
            document.getElementById('availableMembers').textContent = `${activeMembers} disponíveis`;
        }

        function renderActivities() {
            activityList.innerHTML = '';
            
            // Sort activities by timestamp (newest first)
            const sortedActivities = [...activities].sort((a, b) => b.timestamp - a.timestamp);
            
            sortedActivities.forEach(activity => {
                const activityItem = document.createElement('li');
                activityItem.className = 'activity-item';
                
                const iconClass = getActivityIcon(activity.type);
                const timeAgo = getTimeAgo(activity.timestamp);
                
                activityItem.innerHTML = `
                    <div class="activity-icon"><i class="${iconClass}"></i></div>
                    <div>
                        <div>${activity.message}</div>
                        <div style="font-size: 0.8rem; color: var(--gray-color);">${timeAgo} por ${activity.user}</div>
                    </div>
                `;
                
                activityList.appendChild(activityItem);
            });
        }

        function getActivityIcon(type) {
            switch(type) {
                case 'project': return 'fas fa-tasks';
                case 'task': return 'fas fa-check-circle';
                case 'team': return 'fas fa-user-plus';
                case 'comment': return 'fas fa-comment';
                default: return 'fas fa-info-circle';
            }
        }

        function getTimeAgo(timestamp) {
            const now = new Date();
            const diffMs = now - timestamp;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);
            
            if (diffMins < 60) {
                return `Há ${diffMins} minuto${diffMins !== 1 ? 's' : ''}`;
            } else if (diffHours < 24) {
                return `Há ${diffHours} hora${diffHours !== 1 ? 's' : ''}`;
            } else {
                return `Há ${diffDays} dia${diffDays !== 1 ? 's' : ''}`;
            }
        }

        function updateCurrentDate() {
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const dateString = new Date().toLocaleDateString('pt-BR', options);
            document.getElementById('currentDate').textContent = `Hoje é ${dateString}`;
        }

        // ========== PROJECTS ==========
        
        function renderProjects() {
            projectsGrid.innerHTML = '';
            
            projects.forEach(project => {
                const projectCard = document.createElement('div');
                projectCard.className = 'project-card';
                projectCard.setAttribute('data-id', project.id);
                
                const priorityClass = `priority priority-${project.priority}`;
                const priorityText = project.priority === 'high' ? 'Alta' : 
                                   project.priority === 'medium' ? 'Média' : 'Baixa';
                
                const startDate = formatDate(project.startDate);
                const endDate = formatDate(project.endDate);
                const budget = formatCurrency(project.budget);
                
                projectCard.innerHTML = `
                    <div class="project-header">
                        <div class="project-title">${project.name}</div>
                        <div class="${priorityClass}">${priorityText}</div>
                    </div>
                    <div class="project-dates">
                        <span>Início: ${startDate}</span>
                        <span>Final: ${endDate}</span>
                    </div>
                    <div class="project-description">${project.description}</div>
                    <div class="project-progress" style="margin-bottom: 10px;">
                        <div style="display: flex; justify-content: space-between; font-size: 0.8rem; margin-bottom: 5px;">
                            <span>Progresso</span>
                            <span>${project.progress}%</span>
                        </div>
                        <div style="height: 6px; background-color: #eee; border-radius: 3px; overflow: hidden;">
                            <div style="height: 100%; width: ${project.progress}%; background-color: var(--primary-color);"></div>
                        </div>
                    </div>
                    <div class="project-footer">
                        <div class="project-category">${getCategoryName(project.category)}</div>
                        <div class="project-budget">${budget}</div>
                    </div>
                `;
                
                projectsGrid.appendChild(projectCard);
            });
        }

        function showProjectForm() {
            projectsGrid.classList.add('hidden');
            projectDetails.classList.add('hidden');
            projectForm.classList.remove('hidden');
            projectsBreadcrumb.classList.add('hidden');
            
            document.getElementById('formTitle').textContent = 'Criar Novo Projeto';
            document.getElementById('saveProjectBtn').textContent = 'Criar Projeto';
            projectFormElement.reset();
            
            // Reset priority to medium
            priorityOptions.forEach(opt => opt.classList.remove('selected'));
            document.querySelector('.priority-option[data-value="medium"]').classList.add('selected');
            projectPriority.value = 'medium';
            
            // Clear any existing project ID
            projectFormElement.removeAttribute('data-id');
        }

        function showProjectDetails(projectId) {
            const project = projects.find(p => p.id === projectId);
            if (!project) return;
            
            projectsGrid.classList.add('hidden');
            projectForm.classList.add('hidden');
            projectDetails.classList.remove('hidden');
            projectsBreadcrumb.classList.remove('hidden');
            
            currentProjectId = projectId;
            
            // Set project details
            document.getElementById('detailsTitle').textContent = project.name;
            document.getElementById('detailsDescription').textContent = project.description;
            document.getElementById('detailsStartDate').textContent = formatDate(project.startDate);
            document.getElementById('detailsEndDate').textContent = formatDate(project.endDate);
            document.getElementById('detailsBudget').textContent = formatCurrency(project.budget);
            document.getElementById('detailsCategory').textContent = getCategoryName(project.category);
            
            // Set priority
            const priorityElement = document.getElementById('detailsPriority');
            priorityElement.textContent = project.priority === 'high' ? 'Alta' : 
                                         project.priority === 'medium' ? 'Média' : 'Baixa';
            priorityElement.className = 'details-priority priority-' + project.priority;
            
            // Set team members
            const teamContainer = document.getElementById('detailsTeam');
            teamContainer.innerHTML = '';
            
            project.team.forEach(memberId => {
                const member = teamMembers.find(m => m.id === memberId);
                if (member) {
                    const memberElement = document.createElement('div');
                    memberElement.className = 'team-member';
                    memberElement.innerHTML = `
                        <div class="member-avatar">${member.avatar}</div>
                        <span>${member.name}</span>
                    `;
                    teamContainer.appendChild(memberElement);
                }
            });
            
            // Update breadcrumb
            currentProjectName.textContent = project.name;
            
            // Render tasks
            renderProjectTasks(projectId);
            
            // Store current project ID
            projectDetails.setAttribute('data-id', projectId);
        }

        function renderProjectTasks(projectId) {
            const project = projects.find(p => p.id === projectId);
            if (!project) return;
            
            projectTasks.innerHTML = '';
            
            if (project.tasks.length === 0) {
                projectTasks.innerHTML = '<li class="task-item">Nenhuma tarefa cadastrada para este projeto.</li>';
                return;
            }
            
            project.tasks.forEach(task => {
                const taskItem = document.createElement('li');
                taskItem.className = 'task-item';
                
                const assignee = teamMembers.find(m => m.id === task.assignee);
                const assigneeName = assignee ? assignee.name : 'Não atribuído';
                
                taskItem.innerHTML = `
                    <div class="task-info">
                        <div class="task-title">${task.title}</div>
                        <div class="task-description">${task.description}</div>
                        <div style="display: flex; gap: 15px; margin-top: 5px; font-size: 0.8rem;">
                            <span><strong>Responsável:</strong> ${assigneeName}</span>
                            <span><strong>Prazo:</strong> ${formatDate(task.deadline)}</span>
                            <span><strong>Prioridade:</strong> ${task.priority === 'high' ? 'Alta' : task.priority === 'medium' ? 'Média' : 'Baixa'}</span>
                            <span><strong>Status:</strong> ${getTaskStatusText(task.status)}</span>
                        </div>
                    </div>
                    <div class="task-actions">
                        <button class="btn btn-secondary edit-task" data-task-id="${task.id}">Editar</button>
                        <button class="btn btn-danger delete-task" data-task-id="${task.id}">Excluir</button>
                    </div>
                `;
                
                projectTasks.appendChild(taskItem);
            });
            
            // Add event listeners to task buttons
            document.querySelectorAll('.edit-task').forEach(btn => {
                btn.addEventListener('click', function() {
                    const taskId = parseInt(this.getAttribute('data-task-id'));
                    editTask(projectId, taskId);
                });
            });
            
            document.querySelectorAll('.delete-task').forEach(btn => {
                btn.addEventListener('click', function() {
                    const taskId = parseInt(this.getAttribute('data-task-id'));
                    deleteTask(projectId, taskId);
                });
            });
        }

        function getTaskStatusText(status) {
            switch(status) {
                case 'pending': return 'Pendente';
                case 'in-progress': return 'Em Andamento';
                case 'completed': return 'Concluída';
                default: return status;
            }
        }

        function editProject(projectId) {
            const project = projects.find(p => p.id === projectId);
            if (!project) return;
            
            projectsGrid.classList.add('hidden');
            projectDetails.classList.add('hidden');
            projectForm.classList.remove('hidden');
            projectsBreadcrumb.classList.add('hidden');
            
            document.getElementById('formTitle').textContent = 'Editar Projeto';
            document.getElementById('saveProjectBtn').textContent = 'Salvar Alterações';
            
            // Fill form with project data
            document.getElementById('projectName').value = project.name;
            document.getElementById('projectDescription').value = project.description;
            document.getElementById('startDate').value = project.startDate;
            document.getElementById('endDate').value = project.endDate;
            document.getElementById('projectBudget').value = project.budget;
            document.getElementById('projectCategory').value = project.category;
            
            // Set priority
            priorityOptions.forEach(opt => opt.classList.remove('selected'));
            document.querySelector(`.priority-option[data-value="${project.priority}"]`).classList.add('selected');
            projectPriority.value = project.priority;
            
            // Set team members
            const teamSelect = document.getElementById('projectTeam');
            Array.from(teamSelect.options).forEach(option => {
                option.selected = project.team.includes(option.value);
            });
            
            // Store project ID for updating
            projectFormElement.setAttribute('data-id', projectId);
        }

        function saveProject() {
            const projectId = projectFormElement.getAttribute('data-id');
            const isEditing = !!projectId;
            
            const formData = {
                name: document.getElementById('projectName').value,
                description: document.getElementById('projectDescription').value,
                priority: projectPriority.value,
                startDate: document.getElementById('startDate').value,
                endDate: document.getElementById('endDate').value,
                budget: parseFloat(document.getElementById('projectBudget').value) || 0,
                category: document.getElementById('projectCategory').value,
                team: Array.from(document.getElementById('projectTeam').selectedOptions).map(opt => opt.value),
                status: "active",
                progress: 0,
                tasks: []
            };
            
            if (isEditing) {
                // Update existing project
                const index = projects.findIndex(p => p.id === parseInt(projectId));
                if (index !== -1) {
                    // Preserve existing tasks
                    formData.tasks = projects[index].tasks;
                    projects[index] = { ...projects[index], ...formData };
                }
            } else {
                // Create new project
                const newId = projects.length > 0 ? Math.max(...projects.map(p => p.id)) + 1 : 1;
                projects.push({
                    id: newId,
                    ...formData
                });
                
                // Add activity
                activities.unshift({
                    id: activities.length + 1,
                    type: "project",
                    message: `Novo projeto "${formData.name}" criado`,
                    timestamp: new Date(),
                    user: currentUser.name
                });
            }
            
            renderProjects();
            projectsGrid.classList.remove('hidden');
            projectForm.classList.add('hidden');
            projectsBreadcrumb.classList.add('hidden');
            renderDashboard(); // Update dashboard stats
        }

        function deleteProject() {
            const projectId = parseInt(projectDetails.getAttribute('data-id'));
            const project = projects.find(p => p.id === projectId);
            
            if (project && confirm(`Tem certeza que deseja excluir o projeto "${project.name}"?`)) {
                projects = projects.filter(p => p.id !== projectId);
                renderProjects();
                projectsGrid.classList.remove('hidden');
                projectDetails.classList.add('hidden');
                projectsBreadcrumb.classList.add('hidden');
                renderDashboard(); // Update dashboard stats
            }
        }

        function populateTeamSelect() {
            projectTeamSelect.innerHTML = '';
            
            teamMembers.forEach(member => {
                if (member.status === 'active') {
                    const option = document.createElement('option');
                    option.value = member.id;
                    option.textContent = member.name;
                    projectTeamSelect.appendChild(option);
                }
            });
        }

        // ========== TASK MANAGEMENT ==========
        
        function showTaskModal() {
            taskModal.style.display = 'block';
            taskModalTitle.textContent = 'Adicionar Tarefa';
            taskForm.reset();
            taskForm.removeAttribute('data-task-id');
            
            // Populate assignee dropdown
            taskAssignee.innerHTML = '';
            teamMembers.forEach(member => {
                const option = document.createElement('option');
                option.value = member.id;
                option.textContent = member.name;
                taskAssignee.appendChild(option);
            });
        }

        function editTask(projectId, taskId) {
            const project = projects.find(p => p.id === projectId);
            if (!project) return;
            
            const task = project.tasks.find(t => t.id === taskId);
            if (!task) return;
            
            taskModal.style.display = 'block';
            taskModalTitle.textContent = 'Editar Tarefa';
            
            // Fill form with task data
            document.getElementById('taskTitle').value = task.title;
            document.getElementById('taskDescription').value = task.description;
            document.getElementById('taskDeadline').value = task.deadline;
            document.getElementById('taskPriority').value = task.priority;
            
            // Populate assignee dropdown
            taskAssignee.innerHTML = '';
            teamMembers.forEach(member => {
                const option = document.createElement('option');
                option.value = member.id;
                option.textContent = member.name;
                if (member.id === task.assignee) {
                    option.selected = true;
                }
                taskAssignee.appendChild(option);
            });
            
            // Store task ID for updating
            taskForm.setAttribute('data-task-id', taskId);
        }

        function saveTask() {
            const projectId = currentProjectId;
            const taskId = taskForm.getAttribute('data-task-id');
            const isEditing = !!taskId;
            
            const formData = {
                title: document.getElementById('taskTitle').value,
                description: document.getElementById('taskDescription').value,
                assignee: document.getElementById('taskAssignee').value,
                deadline: document.getElementById('taskDeadline').value,
                priority: document.getElementById('taskPriority').value,
                status: 'pending'
            };
            
            const project = projects.find(p => p.id === projectId);
            if (!project) return;
            
            if (isEditing) {
                // Update existing task
                const taskIndex = project.tasks.findIndex(t => t.id === parseInt(taskId));
                if (taskIndex !== -1) {
                    project.tasks[taskIndex] = { ...project.tasks[taskIndex], ...formData };
                }
            } else {
                // Create new task
                const newId = project.tasks.length > 0 ? Math.max(...project.tasks.map(t => t.id)) + 1 : 1;
                project.tasks.push({
                    id: newId,
                    ...formData
                });
                
                // Add activity
                activities.unshift({
                    id: activities.length + 1,
                    type: "task",
                    message: `Nova tarefa "${formData.title}" adicionada ao projeto "${project.name}"`,
                    timestamp: new Date(),
                    user: currentUser.name
                });
            }
            
            renderProjectTasks(projectId);
            closeTaskModal();
            renderDashboard(); // Update dashboard stats
        }

        function deleteTask(projectId, taskId) {
            const project = projects.find(p => p.id === projectId);
            if (!project) return;
            
            const task = project.tasks.find(t => t.id === taskId);
            if (!task) return;
            
            if (confirm(`Tem certeza que deseja excluir a tarefa "${task.title}"?`)) {
                project.tasks = project.tasks.filter(t => t.id !== taskId);
                renderProjectTasks(projectId);
                renderDashboard(); // Update dashboard stats
            }
        }

        function closeTaskModal() {
            taskModal.style.display = 'none';
        }

        // ========== TEAM ==========
        
        function renderTeam() {
            teamGrid.innerHTML = '';
            
            teamMembers.forEach(member => {
                const memberCard = document.createElement('div');
                memberCard.className = 'team-member-card';
                memberCard.setAttribute('data-id', member.id);
                
                const statusClass = member.status === 'active' ? 'status-active' : 
                                  member.status === 'inactive' ? 'status-inactive' : 'status-vacation';
                
                memberCard.innerHTML = `
                    <div class="member-actions">
                        <button class="action-btn edit-member" title="Editar"><i class="fas fa-edit"></i></button>
                        <button class="action-btn delete-member" title="Excluir"><i class="fas fa-trash"></i></button>
                    </div>
                    <div class="member-avatar-large">${member.avatar}</div>
                    <div class="member-name">${member.name}</div>
                    <div class="member-role">${member.role}</div>
                    <div class="member-status ${statusClass}" style="margin-bottom: 10px; padding: 4px 8px; border-radius: 12px; font-size: 0.8rem; background-color: ${getStatusColor(member.status)}; color: white;">
                        ${getStatusText(member.status)}
                    </div>
                    <div class="member-skills">
                        ${member.skills.map(skill => `<span class="skill-tag">${skill}</span>`).join('')}
                    </div>
                `;
                
                teamGrid.appendChild(memberCard);
            });
            
            // Add event listeners to action buttons
            document.querySelectorAll('.edit-member').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const memberId = this.closest('.team-member-card').getAttribute('data-id');
                    editMember(memberId);
                });
            });
            
            document.querySelectorAll('.delete-member').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const memberId = this.closest('.team-member-card').getAttribute('data-id');
                    deleteMember(memberId);
                });
            });
        }

        function getStatusColor(status) {
            switch(status) {
                case 'active': return '#27ae60';
                case 'inactive': return '#95a5a6';
                case 'vacation': return '#f39c12';
                default: return '#95a5a6';
            }
        }

        function getStatusText(status) {
            switch(status) {
                case 'active': return 'Ativo';
                case 'inactive': return 'Inativo';
                case 'vacation': return 'Férias';
                default: return 'Inativo';
            }
        }

        function showMemberForm() {
            teamGrid.classList.add('hidden');
            memberForm.classList.remove('hidden');
            
            document.getElementById('memberFormTitle').textContent = 'Adicionar Membro';
            document.getElementById('saveMemberBtn').textContent = 'Adicionar Membro';
            memberFormElement.reset();
            
            // Clear any existing member ID
            memberFormElement.removeAttribute('data-id');
        }

        function editMember(memberId) {
            const member = teamMembers.find(m => m.id === memberId);
            if (!member) return;
            
            teamGrid.classList.add('hidden');
            memberForm.classList.remove('hidden');
            
            document.getElementById('memberFormTitle').textContent = 'Editar Membro';
            document.getElementById('saveMemberBtn').textContent = 'Salvar Alterações';
            
            // Fill form with member data
            document.getElementById('memberName').value = member.name;
            document.getElementById('memberEmail').value = member.email;
            document.getElementById('memberRole').value = member.role;
            document.getElementById('memberSkills').value = member.skills.join(', ');
            document.getElementById('memberStatus').value = member.status;
            
            // Store member ID for updating
            memberFormElement.setAttribute('data-id', memberId);
        }

        function saveMember() {
            const memberId = memberFormElement.getAttribute('data-id');
            const isEditing = !!memberId;
            
            const formData = {
                name: document.getElementById('memberName').value,
                email: document.getElementById('memberEmail').value,
                role: document.getElementById('memberRole').value,
                skills: document.getElementById('memberSkills').value.split(',').map(s => s.trim()).filter(s => s),
                status: document.getElementById('memberStatus').value,
                avatar: document.getElementById('memberName').value.split(' ').map(n => n[0]).join('').toUpperCase()
            };
            
            if (isEditing) {
                // Update existing member
                const index = teamMembers.findIndex(m => m.id === memberId);
                if (index !== -1) {
                    teamMembers[index] = { ...teamMembers[index], ...formData };
                }
            } else {
                // Create new member
                const newId = formData.name.toLowerCase().replace(/\s+/g, '');
                teamMembers.push({
                    id: newId,
                    ...formData
                });
            }
            
            renderTeam();
            teamGrid.classList.remove('hidden');
            memberForm.classList.add('hidden');
            populateTeamSelect(); // Update team select in project form
            renderDashboard(); // Update dashboard stats
        }

        function deleteMember(memberId) {
            const member = teamMembers.find(m => m.id === memberId);
            
            if (member && confirm(`Tem certeza que deseja excluir o membro "${member.name}"?`)) {
                teamMembers = teamMembers.filter(m => m.id !== memberId);
                renderTeam();
                populateTeamSelect(); // Update team select in project form
                renderDashboard(); // Update dashboard stats
            }
        }

        // ========== CALENDAR ==========
        
        function renderCalendar() {
            updateCalendarHeader();
            renderCalendarGrid();
        }

        function updateCalendarHeader() {
            const options = { year: 'numeric', month: 'long' };
            calendarMonth.textContent = currentDate.toLocaleDateString('pt-BR', options);
        }

        function renderCalendarGrid() {
            calendarGrid.innerHTML = '';
            
            // Add day headers
            const dayNames = ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb'];
            dayNames.forEach(day => {
                const dayHeader = document.createElement('div');
                dayHeader.className = 'calendar-day-header';
                dayHeader.textContent = day;
                calendarGrid.appendChild(dayHeader);
            });
            
            // Get first day of month and last day of month
            const firstDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
            const lastDay = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);
            
            // Get day of week for first day (0 = Sunday, 6 = Saturday)
            const firstDayOfWeek = firstDay.getDay();
            
            // Add empty cells for days before the first day of the month
            for (let i = 0; i < firstDayOfWeek; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day other-month';
                calendarGrid.appendChild(emptyDay);
            }
            
            // Add days of the month
            for (let day = 1; day <= lastDay.getDate(); day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                
                // Check if this is today
                const today = new Date();
                if (currentDate.getFullYear() === today.getFullYear() && 
                    currentDate.getMonth() === today.getMonth() && 
                    day === today.getDate()) {
                    dayElement.classList.add('today');
                }
                
                dayElement.innerHTML = `<div class="day-number">${day}</div>`;
                
                // Add events for this day
                const dateStr = `${currentDate.getFullYear()}-${String(currentDate.getMonth() + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                const dayEvents = calendarEvents.filter(event => 
                    event.startDate <= dateStr && event.endDate >= dateStr
                );
                
                dayEvents.forEach(event => {
                    const eventElement = document.createElement('div');
                    eventElement.className = 'calendar-event';
                    eventElement.style.backgroundColor = event.color;
                    eventElement.textContent = event.title;
                    eventElement.setAttribute('title', event.description);
                    dayElement.appendChild(eventElement);
                });
                
                calendarGrid.appendChild(dayElement);
            }
        }

        function prevMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar();
        }

        function nextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar();
        }

        function goToToday() {
            currentDate = new Date();
            renderCalendar();
        }

        function showEventForm() {
            calendarGrid.classList.add('hidden');
            eventForm.classList.remove('hidden');
            
            document.getElementById('eventFormTitle').textContent = 'Adicionar Evento';
            document.getElementById('saveEventBtn').textContent = 'Salvar Evento';
            eventFormElement.reset();
            
            // Set default dates to today
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('eventStartDate').value = today;
            document.getElementById('eventEndDate').value = today;
            
            // Clear any existing event ID
            eventFormElement.removeAttribute('data-id');
        }

        function saveEvent() {
            const eventId = eventFormElement.getAttribute('data-id');
            const isEditing = !!eventId;
            
            const formData = {
                title: document.getElementById('eventTitle').value,
                description: document.getElementById('eventDescription').value,
                startDate: document.getElementById('eventStartDate').value,
                endDate: document.getElementById('eventEndDate').value,
                color: document.getElementById('eventColor').value
            };
            
            if (isEditing) {
                // Update existing event
                const index = calendarEvents.findIndex(e => e.id === parseInt(eventId));
                if (index !== -1) {
                    calendarEvents[index] = { ...calendarEvents[index], ...formData };
                }
            } else {
                // Create new event
                const newId = calendarEvents.length > 0 ? Math.max(...calendarEvents.map(e => e.id)) + 1 : 1;
                calendarEvents.push({
                    id: newId,
                    ...formData
                });
            }
            
            renderCalendar();
            calendarGrid.classList.remove('hidden');
            eventForm.classList.add('hidden');
        }

        // ========== REPORTS ==========
        
        function renderReports() {
            updateReportStats();
            renderCharts();
        }

        function updateReportStats() {
            const completedProjects = projects.filter(p => p.status === 'completed').length;
            const totalProjects = projects.length;
            const successRate = totalProjects > 0 ? Math.round((completedProjects / totalProjects) * 100) : 0;
            const averageBudget = projects.length > 0 ? 
                projects.reduce((sum, p) => sum + p.budget, 0) / projects.length : 0;
            const activeMembers = teamMembers.filter(m => m.status === 'active').length;
            
            document.getElementById('completedProjects').textContent = completedProjects;
            document.getElementById('successRate').textContent = `${successRate}%`;
            document.getElementById('averageBudget').textContent = formatCurrency(averageBudget);
            document.getElementById('activeMembers').textContent = activeMembers;
        }

        function renderCharts() {
            // Destroy existing charts
            Object.values(charts).forEach(chart => {
                if (chart) chart.destroy();
            });
            
            // Projects Progress Chart
            const progressCtx = document.getElementById('projectsProgressChart').getContext('2d');
            charts.progress = new Chart(progressCtx, {
                type: 'bar',
                data: {
                    labels: projects.map(p => p.name),
                    datasets: [{
                        label: 'Progresso (%)',
                        data: projects.map(p => p.progress),
                        backgroundColor: projects.map(p => 
                            p.priority === 'high' ? '#e74c3c' : 
                            p.priority === 'medium' ? '#f39c12' : '#27ae60'
                        ),
                        borderColor: projects.map(p => 
                            p.priority === 'high' ? '#c0392b' : 
                            p.priority === 'medium' ? '#d35400' : '#229954'
                        ),
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });
            
            // Resource Allocation Chart
            const resourceCtx = document.getElementById('resourceAllocationChart').getContext('2d');
            
            // Calculate resource allocation by category
            const categories = [...new Set(projects.map(p => p.category))];
            const allocationData = categories.map(category => {
                const categoryProjects = projects.filter(p => p.category === category);
                return categoryProjects.reduce((sum, p) => sum + p.budget, 0);
            });
            
            charts.resource = new Chart(resourceCtx, {
                type: 'pie',
                data: {
                    labels: categories.map(getCategoryName),
                    datasets: [{
                        data: allocationData,
                        backgroundColor: [
                            '#3498db', '#27ae60', '#e74c3c', '#f39c12', '#9b59b6',
                            '#1abc9c', '#d35400', '#c0392b', '#16a085', '#8e44ad'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
            
            // Category Performance Chart
            const performanceCtx = document.getElementById('categoryPerformanceChart').getContext('2d');
            
            const performanceData = categories.map(category => {
                const categoryProjects = projects.filter(p => p.category === category);
                const avgProgress = categoryProjects.length > 0 ? 
                    categoryProjects.reduce((sum, p) => sum + p.progress, 0) / categoryProjects.length : 0;
                return avgProgress;
            });
            
            charts.performance = new Chart(performanceCtx, {
                type: 'radar',
                data: {
                    labels: categories.map(getCategoryName),
                    datasets: [{
                        label: 'Desempenho Médio (%)',
                        data: performanceData,
                        backgroundColor: 'rgba(52, 152, 219, 0.2)',
                        borderColor: '#3498db',
                        borderWidth: 2,
                        pointBackgroundColor: '#3498db'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });
        }

        function exportReport() {
            // In a real application, this would generate a PDF or Excel file
            showNotification('Relatório exportado com sucesso! Em uma aplicação real, isso geraria um arquivo PDF ou Excel.', 'success');
        }

        // ========== UTILITY FUNCTIONS ==========
        
        function formatDate(dateString) {
            if (!dateString) return '--/--/----';
            
            const date = new Date(dateString);
            const day = String(date.getDate()).padStart(2, '0');
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const year = date.getFullYear();
            
            return `${day}/${month}/${year}`;
        }

        function formatCurrency(amount) {
            return new Intl.NumberFormat('pt-BR', {
                style: 'currency',
                currency: 'BRL'
            }).format(amount);
        }

        function getCategoryName(category) {
            const categories = {
                tecnologia: "Tecnologia",
                marketing: "Marketing",
                rh: "Recursos Humanos",
                financeiro: "Financeiro",
                operacoes: "Operações"
            };
            return categories[category] || category;
        }

        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        // ========== EVENT LISTENERS ==========
        
        function setupEventListeners() {
            // Login
            setupLogin();
            
            // Navigation
            setupNavigation();
            
            // Projects
            newProjectBtn.addEventListener('click', showProjectForm);
            cancelBtn.addEventListener('click', () => {
                projectsGrid.classList.remove('hidden');
                projectForm.classList.add('hidden');
                projectsBreadcrumb.classList.add('hidden');
            });
            backToListBtn.addEventListener('click', () => {
                projectDetails.classList.add('hidden');
                projectsGrid.classList.remove('hidden');
                projectsBreadcrumb.classList.add('hidden');
            });
            backToProjects.addEventListener('click', () => {
                projectDetails.classList.add('hidden');
                projectsGrid.classList.remove('hidden');
                projectsBreadcrumb.classList.add('hidden');
            });
            editProjectBtn.addEventListener('click', () => {
                const projectId = projectDetails.getAttribute('data-id');
                editProject(parseInt(projectId));
            });
            deleteProjectBtn.addEventListener('click', deleteProject);
            projectFormElement.addEventListener('submit', function(e) {
                e.preventDefault();
                saveProject();
            });
            
            // Priority options
            priorityOptions.forEach(option => {
                option.addEventListener('click', function() {
                    priorityOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    projectPriority.value = this.getAttribute('data-value');
                });
            });
            
            // Project card clicks
            projectsGrid.addEventListener('click', function(e) {
                const projectCard = e.target.closest('.project-card');
                if (projectCard) {
                    const projectId = parseInt(projectCard.getAttribute('data-id'));
                    showProjectDetails(projectId);
                }
            });
            
            // Task Management
            addTaskBtn.addEventListener('click', showTaskModal);
            taskForm.addEventListener('submit', function(e) {
                e.preventDefault();
                saveTask();
            });
            cancelTaskBtn.addEventListener('click', closeTaskModal);
            document.querySelector('.close-modal').addEventListener('click', closeTaskModal);
            window.addEventListener('click', function(e) {
                if (e.target === taskModal) {
                    closeTaskModal();
                }
            });
            
            // Team
            addMemberBtn.addEventListener('click', showMemberForm);
            cancelMemberBtn.addEventListener('click', () => {
                teamGrid.classList.remove('hidden');
                memberForm.classList.add('hidden');
            });
            memberFormElement.addEventListener('submit', function(e) {
                e.preventDefault();
                saveMember();
            });
            
            // Calendar
            prevMonthBtn.addEventListener('click', prevMonth);
            nextMonthBtn.addEventListener('click', nextMonth);
            todayBtn.addEventListener('click', goToToday);
            addEventBtn.addEventListener('click', showEventForm);
            cancelEventBtn.addEventListener('click', () => {
                calendarGrid.classList.remove('hidden');
                eventForm.classList.add('hidden');
            });
            eventFormElement.addEventListener('submit', function(e) {
                e.preventDefault();
                saveEvent();
            });
            
            // Reports
            applyFiltersBtn.addEventListener('click', renderReports);
            exportReportBtn.addEventListener('click', exportReport);
        }
    </script>
</body>
</html>